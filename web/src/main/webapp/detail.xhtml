<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:cc="http://java.sun.com/jsp/jstl/core"
                xmlns:c="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                template="/resources/templates/template.xhtml"
                xml:lang="en" lang="en">

    <c:metadata>
        <c:viewParam name="id" value="#{productJSF.productId}"/>
        <c:event listener="#{productJSF.refreshPageProduct(productJSF.productId)}" type="preRenderView"/>
    </c:metadata>

    <ui:define name="content">
        <br/>
        <h1>CheorgesTec - Onlineshop</h1>
        <hr/>
        <h:form>
            <div class="card">
                <h5 class="card-header">
                    #{productJSF.product.title} <span
                        class="badge badge-pill badge-primary">#{productJSF.product.stock}</span>
                </h5>
                <div class="card-body">
                    <div class="card-deck">
                        <div class="card shadow">
                            <div class="card-body">
                                <h5 class="card-title">#{productJSF.product.title}</h5>
                                <hr/>
                                <p class="card-text text-muted">
                                    <h:outputText value="#{productJSF.product.unitprice}">
                                        <c:convertNumber minFractionDigits="2"/>
                                    </h:outputText> CHF
                                </p>
                                <p class="card-text">#{productJSF.product.description}</p>
                                <br/>
                                <footer class="blockquote-footer">#{productJSF.product.seller.representation}</footer>
                                <cc:if test="#{customerSessionJSF.authenticated}">
                                    <br/>
                                    <h:commandButton value="Add To Cart" class="btn btn-primary"
                                                     actionListener="#{productPurchaseJSF.addToShoppingCart(productJSF.product)}"/>
                                </cc:if>
                            </div>
                        </div>
                        <div class="card shadow">
                            <div class="card-body">
                                <img class="card-img-top" src="image?id=#{productJSF.productId}"
                                     alt="#{productJSF.product}"/>
                                <div class="card-img-overlay"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </h:form>
    </ui:define>
</ui:composition>
